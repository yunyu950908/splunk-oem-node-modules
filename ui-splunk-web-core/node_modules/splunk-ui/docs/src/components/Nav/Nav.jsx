import React, { PropTypes } from 'react';
import { createTestHook } from 'splunk-ui/util/testSupport';
import Button from 'splunk-ui/components/Button';
import Scroll from 'splunk-ui/components/Scroll';
import Heading from './Heading';
import Item from './Item';
import css from './Nav.css';

const propTypes = {
    version: PropTypes.string,
    children: PropTypes.node,
};

function Nav(props) {
    const { children, version } = props;

    const theme = window.__splunk_ui_theme__; // eslint-disable-line no-underscore-dangle

    function toggleTheme(e) {
        e.preventDefault();
        document.cookie = `app_splunk_ui_docs_theme=${theme === 'lite' ? 'enterprise' : 'lite'}`;
        location.reload();
    }

    /* eslint-disable max-len */
    return (
        <div className={css.main} {...createTestHook(__filename)} role="navigation" >
            <div className={css.title}>
                <svg className={css.logo} viewBox="0 0 345 84" xmlns="http://www.w3.org/2000/svg">
                    <title>
                        Splunk UI
                    </title>
                    <path d="M30.346 50.187c0 3.722-1.53 6.846-4.586 9.37-2.924 2.393-6.396 3.59-10.417 3.59-2.99 0-5.766-.417-8.324-1.247-2.56-.83-4.653-2.01-6.28-3.54l3.587-5.98c.1.332 1.113 1.03 3.04 2.094 2.36 1.33 4.52 1.993 6.48 1.993 1.396 0 2.626-.448 3.688-1.345 1.065-.898 1.596-2.077 1.596-3.54 0-1.527-.63-2.99-1.893-4.386-.83-.897-2.26-2.043-4.287-3.44l-3.987-2.79C6.97 39.57 5.506 38.142 4.576 36.68c-1.03-1.662-1.544-3.606-1.544-5.833 0-3.39 1.578-6.197 4.734-8.423 2.892-2.027 6.215-3.04 9.97-3.04 1.628 0 3.49.298 5.583.896 3.022.865 5 1.63 5.93 2.293l-3.19 5.483c-.068-.066-.552-.282-1.452-.648-2.102-.83-3.52-1.287-4.254-1.37-.735-.083-1.285-.125-1.65-.125-1.303 0-2.446.324-3.43.972-.985.648-1.477 1.47-1.477 2.467V30c0 1.164.5 2.243 1.496 3.24.498.498 1.612 1.345 3.34 2.542l5.133 3.688c1.994 1.396 3.59 3.058 4.785 4.985 1.198 1.927 1.796 3.838 1.796 5.732zM68.914 41.614c0-4.486-.715-8.125-2.143-10.916-1.794-3.522-4.618-5.283-8.472-5.283-3.69 0-6.53 1.612-8.524 4.834-1.728 2.79-2.59 6.214-2.59 10.267 0 4.42.896 8.06 2.69 10.916 2.126 3.39 5.167 5.084 9.122 5.084 3.29 0 5.83-1.645 7.625-4.934 1.53-2.79 2.294-6.114 2.294-9.97m12.063-.996c0 5.882-1.778 11.033-5.334 15.452-3.72 4.618-8.274 6.927-13.657 6.927-3.29 0-6.09-.548-8.398-1.645-2.31-1.096-4.445-2.774-6.405-5.034v26.966H36.565V20.28h10.618v5.932c1.926-2.492 4.153-4.336 6.678-5.533 2.527-1.197 5.268-1.795 8.226-1.795 6.312 0 11.148 2.227 14.504 6.68 2.924 3.887 4.387 8.905 4.387 15.052M87.047 62h10.617V.093H87.047M145.404 62h-10.916v-4.686c-.9 1.318-2.835 2.653-5.803 4.004-2.7 1.22-5.484 1.828-8.35 1.828-4.804 0-8.52-1.46-11.156-4.38-2.4-2.656-3.602-6.14-3.602-10.456V20.28h11.015v25.286c0 3.517.765 6.14 2.293 7.864 1.43 1.626 3.49 2.44 6.182 2.44 2.458 0 4.643-.938 6.555-2.813 1.91-1.875 2.865-4.173 2.865-6.894V20.28h10.916V62zM191.25 62h-10.965V35.084c0-2.658-.82-4.718-2.456-6.18-1.472-1.33-3.36-1.994-5.665-1.994-2.474 0-4.662.797-6.565 2.392-2.107 1.762-3.16 4.005-3.16 6.73V62h-11.014V20.28h11.015v5.832c1.297-1.86 3.224-3.405 5.783-4.635 2.724-1.33 5.6-1.994 8.623-1.994 4.12 0 7.41 1.064 9.87 3.19 3.022 2.625 4.535 6.696 4.535 12.212V62zM235.054 59.147l-10.068 3.588-16.65-23.265V62H197.72V.093h10.617V36.48h1.246l14.996-17.346 8.27 3.63-14.4 15.202" fill="#FEFEFE" />
                    <path fill="#fff" d="M276.215 41.514l-37.632 21.622.007-5.41 31.266-17.904-31.275-14.354.002-5.25 37.633 17.008" />
                    <path fill="#fff" d="M287 32h4v-4h-4M287 38h4v-4h-4M293 32h4v-4h-4M293 38h4v-4h-4M287 44h4v-4h-4M287 50h4v-4h-4M293 44h4v-4h-4M293 50h4v-4h-4M287 56h4v-4h-4M287 62h4v-4h-4M293 56h4v-4h-4M293 62h4v-4h-4M299 56h4v-4h-4M299 62h4v-4h-4M305 56h4v-4h-4M305 62h4v-4h-4M317 56h4v-4h-4M317 62h4v-4h-4M323 56h4v-4h-4M323 62h4v-4h-4M317 44h4v-4h-4M317 50h4v-4h-4M323 44h4v-4h-4M323 50h4v-4h-4M317 32h4v-4h-4M317 38h4v-4h-4M323 32h4v-4h-4M323 38h4v-4h-4M341 56h4v-4h-4M341 62h4v-4h-4M335 56h4v-4h-4M335 62h4v-4h-4M341 44h4v-4h-4M341 50h4v-4h-4M335 44h4v-4h-4M335 50h4v-4h-4M341 32h4v-4h-4M341 38h4v-4h-4M335 32h4v-4h-4M335 38h4v-4h-4M341 8h4V4h-4M335 8h4V4h-4M341 14h4v-4h-4M335 14h4v-4h-4M311 56h4v-4h-4M311 62h4v-4h-4M287 26h4v-4h-4M293 26h4v-4h-4M317 26h4v-4h-4M323 26h4v-4h-4M341 26h4v-4h-4M335 26h4v-4h-4" />
                </svg>
                <span className={css.version}>{version}</span>
            </div>

            <div className={css.themes}>
                <Button
                    appearance="pill"
                    label="Enterprise"
                    onClick={toggleTheme}
                    selected={theme === 'enterprise'}
                />
                <Button
                    appearance="pill"
                    label="Lite"
                    onClick={toggleTheme}
                    selected={theme === 'lite'}
                />
            </div>
            <Scroll className={css.scroll} stopScrollPropagation>
                <ul className={css.ul}>
                    {children}
                </ul>
            </Scroll>
        </div>
    );

    /* eslint-enabled */
}

Nav.propTypes = propTypes;
Nav.Item = Item;
Nav.Heading = Heading;
export default Nav;
